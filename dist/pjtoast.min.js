class PjToast{static POSITION_TOP_LEFT="top-left";static POSITION_TOP_CENTER="top-center";static POSITION_TOP_RIGHT="top-right";static POSITION_BOTTOM_LEFT="bottom-left";static POSITION_BOTTOM_CENTER="bottom-center";static POSITION_BOTTOM_RIGHT="bottom-right";static containers={};static stackDelay=1e3;constructor(t,s={}){const o={duration:3e3,delay:0,position:PjToast.POSITION_BOTTOM_CENTER,template:'<div style="background: #323232; color: #fff; padding: 16px 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); min-width: 200px;">%content%</div>',progressTemplate:'<div style="position: absolute; bottom: 0; left: 0; height: 3px; background: rgba(255,255,255,0.3); width: %progress%%; transition: width 50ms linear;"></div>',dismissible:!1,showProgress:!1,context:document.body,data:{},onShow:null,onHide:null,onClick:null,onProgress:null};this.options={...o,...s},this.content=t,this.toastElement=null,this.progressElement=null,this.timeoutId=null,this.progressInterval=null,this._injectStyles(),this.show()}_parseTemplate(t,s){let o=t;return Object.keys(s).forEach((t=>{const e=new RegExp(`%${t}%`,"g");o=o.replace(e,s[t]||"")})),o}_buildHTML(){let t="";return t+=this._parseTemplate(this.options.template,{content:this.content,...this.options.data}),t}_getContainer(){const t=`toast-container-${this.options.position}`;if(!PjToast.containers[this.options.position]){const s=document.createElement("div");s.id=t,s.className="toast-stack-container";const o=this._getPositionStyles();Object.assign(s.style,{position:"fixed",zIndex:"9999",display:"flex",flexDirection:"column",gap:"10px",...o}),this.options.context.appendChild(s),PjToast.containers[this.options.position]=s}return PjToast.containers[this.options.position]}_getPositionStyles(){const t={[PjToast.POSITION_TOP_LEFT]:{top:"20px",left:"20px"},[PjToast.POSITION_TOP_CENTER]:{top:"20px",left:"50%",transform:"translateX(-50%)"},[PjToast.POSITION_TOP_RIGHT]:{top:"20px",right:"20px"},[PjToast.POSITION_BOTTOM_LEFT]:{bottom:"20px",left:"20px"},[PjToast.POSITION_BOTTOM_CENTER]:{bottom:"20px",left:"50%",transform:"translateX(-50%)"},[PjToast.POSITION_BOTTOM_RIGHT]:{bottom:"20px",right:"20px"}};return t[this.options.position]||t[PjToast.POSITION_BOTTOM_CENTER]}_calculateStackDelay(){const t=PjToast.containers[this.options.position];return t?t.children.length*PjToast.stackDelay:0}_createElement(){const t=document.createElement("div");if(t.className="toast-wrapper toast-bounce-in",this.options.showProgress&&(t.style.position="relative",t.style.overflow="hidden"),t.innerHTML=this._buildHTML(),Object.assign(t.style,{pointerEvents:this.options.dismissible?"auto":"none"}),this.options.dismissible&&(t.style.cursor="pointer",t.addEventListener("click",(()=>{this.options.onClick&&this.options.onClick({toast:this}),this.hide()}))),this.options.showProgress){const s=document.createElement("div");s.style.cssText="position: absolute; bottom: 0; left: 0; height: 3px; background: rgba(255,255,255,0.3); width: 0%; transition: width 50ms linear;",t.appendChild(s),this.progressElement=s}return t}_startProgress(){if(!this.options.showProgress||!this.progressElement)return;const t=Date.now(),s=this.options.duration+this._calculateStackDelay(),o=()=>{const e=Date.now()-t,i=Math.min(e/s*100,100);this.progressElement&&(this.progressElement.style.width=`${i}%`,this.options.onProgress&&this.options.onProgress({progress:i,toast:this})),i<100&&this.toastElement&&(this.progressInterval=requestAnimationFrame(o))};this.progressInterval=requestAnimationFrame(o)}show(){return this.toastElement||(this.options.delay>0?setTimeout((()=>this._showNow()),this.options.delay):this._showNow()),this}_showNow(){this.toastElement=this._createElement();const t=this._getContainer(),s=this._calculateStackDelay();t.appendChild(this.toastElement),this.options.onShow&&this.options.onShow({toast:this}),this._startProgress(),this.timeoutId=setTimeout((()=>this.hide()),this.options.duration+s)}hide(){return this.toastElement?(clearTimeout(this.timeoutId),this.progressInterval&&cancelAnimationFrame(this.progressInterval),this.toastElement.classList.remove("toast-bounce-in"),this.toastElement.classList.add("toast-fade-out"),setTimeout((()=>{if(this.toastElement&&this.toastElement.parentNode){this.toastElement.parentNode.removeChild(this.toastElement);const t=PjToast.containers[this.options.position];t&&0===t.children.length&&(t.parentNode.removeChild(t),delete PjToast.containers[this.options.position])}this.toastElement=null,this.progressElement=null,this.options.onHide&&this.options.onHide({toast:this})}),500),this):this}_injectStyles(){if(document.getElementById("toast-styles"))return;const t=document.createElement("style");t.id="toast-styles",t.textContent="@keyframes toastBounceIn{0%{opacity:0;transform:scale(0.3) translateY(-20px);}50% { opacity: 1; transform: scale(1.05) translateY(0); }70% { transform: scale(0.9); }100% { transform: scale(1); }}@keyframes toastFadeOut {0%{opacity: 1;}100%{opacity: 0;}}.toast-bounce-in { animation: toastBounceIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55); }.toast-fade-out{animation:toastFadeOut 0.5s ease-out forwards;}.toast-stack-container{pointer-events: none;}.toast-wrapper{pointer-events:auto;}",document.head.appendChild(t)}}window.pjtoast=PjToast;